
# PRIA Conversion Map Generator

This project contains three Python scripts designed to generate PRIA conversion maps for non-ambiguous conversions. The scripts are:
  
1.  `select_default_conversions_pass1.py`
2.  `select_group_default_conversions_pass2.py`
3.  `generates_pria_conversion_maps.py`

## Overview

The scripts are designed to be run in sequence to process a Keystone report and generate conversion maps. Each script performs a specific task in the conversion process:

1.  **`select_default_conversions_pass1.py`**: This script selects default conversions for fields (as oppose to group) from the Keystone report. It then generates a new *augmented* Keystone report with additional information like what fields have been selected in case of ambiguity.
2.  **`select_group_default_conversions_pass2.py`**: This script processes group default conversions. It is using the previsoulty generated report in input to generate another new *augmented* Keystone report with additional information like what group has been selected in case of ambiguity.
3.  **`generates_pria_conversion_maps.py`**: This script generates the final PRIA conversion maps using the lastly generated "augmented" Keystone report.

## Usage

### Prerequisites
- Python 3.x
- Required Python packages: `pandas`, `argparse`

You can install the required packages using pip:
```sh
pip  install  pandas  argparse
```

### Step 1: Select Default Conversions

Run the select_default_conversions_pass1.py script to select default conversions from the Keystone report.
```sh
python [select_default_conversions_pass1.py] <keystone_report> <source> <target> [--run_test] [--log]
```
- <keystone_report\>: Path to your Keystone report file. Must be an Excel format .xlsx.
- <source\>: Name and version of the canonical source (e.g., ShippingLabel 3.0).
- <target\>: Name and version of the canonical target (e.g., Shipment 7.7).
- -\-run_test: Optional flag to run tests at the end (default: False).
- -\-log: Optional flag to enable logging in the log subdirectory (default: False).
- -\-generate_csv: Optional flag to generate a CSV file containing all the groups that need to use qualifiers (default: False).

### Step 2: Process Group Default Conversions  

Run the select_group_default_conversions_pass2.py script to process group default conversions.
```sh
python [select_group_default_conversions_pass2.py] <augmented_keystone_report> <source> <target> [--run_test] [--log]
```
- <augmented_keystone_report\>: Path to your augmented Keystone report file. This is the file generated by the previous script, select_default_conversions_pass1.py. Must be an Excel format .xlsx.
-  <source\>: Name and version of the canonical source (e.g., ShippingLabel 3.0).
-  <target\>: Name and version of the canonical target (e.g., Shipment 7.7).
- -\-run_test: Optional flag to run tests at the end (default: False).
- -\-log: Optional flag to enable logging in the log subdirectory (default: False).
- -\-generate_csv: Optional flag to generate a CSV file containing all the groups that need to use qualifiers (default: False).

### Step 3: Generate PRIA Conversion Maps

Run the generates_pria_conversion_maps.py script to generate the final PRIA conversion maps.
```sh
python [generates_pria_conversion_maps.py] <augmented_keystone_report> <source> <target> [--run_test] [--log] [--generate_csv]
```
-  <augmented_keystone_report\>: Path to your Keystone report file. This is the file generated by the previous script, select_group_default_conversions_pass2.py. Must be an Excel format .xlsx.
-  <source\>: Name and version of the canonical source (e.g., ShippingLabel 3.0).
-  <target\>: Name and version of the canonical target (e.g., Shipment 7.7).
- -\-run_test: Optional flag to run tests at the end (default: False).
- -\-log: Optional flag to enable logging in the log subdirectory (default: False).
- -\-generate_csv: Optional flag to generate a CSV file containing all the groups that need to use qualifiers (default: False).

### Example

Here is an example of how to run the scripts in sequence:
```sh
# Step 1: Select Default Conversions
python [select_default_conversions_pass1.py] keystone_report.xlsx "ShippingLabel 3.0"  "Shipment 7.7" --run_test --log --generate_csv

# Step 2: Process Group Default Conversions
python [select_group_default_conversions_pass2.py] augmented_keystone_report_step1.xlsx "ShippingLabel 3.0"  "Shipment 7.7" --run_test --log --generate_csv

# Step 3: Generate PRIA Conversion Maps
python [generates_pria_conversion_maps.py] augmented_keystone_report_step2.xlsx "ShippingLabel 3.0"  "Shipment 7.7" --run_test --log --generate_csv
```
### Notes
- Ensure that the Keystone report file is correctly formatted and accessible.
- The scripts should be run in the specified order to ensure proper processing and generation of conversion maps.